<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Меню - BITE</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .menu-page {
            padding-top: 80px;
        }
        
        
        
        .menu-types {
            display: flex;
            padding: 20px;
            background-color: #F4F2E5;
            border-bottom: 1px solid #ddd;
        }
        
        .menu-type-btn {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            color: #5B120D;
            text-transform: uppercase;
        }
        
        .menu-type-btn.active {
            background-color: #5B120D;
            color: #F4F2E5;
        }
        
        .menu-categories {
            padding: 20px;
            background-color: #eee;
        }
        
        .categories-list {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        
        .category-btn {
            padding: 10px 20px;
            background: none;
            border: 1px solid #5B120D;
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
            color: #5B120D;
        }
        
        .category-btn.active {
            background-color: #5B120D;
            color: #F4F2E5;
        }
        
        .menu-items {
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .dish-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background-color: white;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .dish-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .dish-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .dish-name {
            font-size: 20px;
            color: #5B120D;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .dish-weight {
            font-size: 14px;
            color: #777;
            margin-bottom: 10px;
        }
        
        .dish-description {
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
            color: #555;
        }
        
        .dish-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .dish-price {
            font-size: 20px;
            font-weight: bold;
            color: #5B120D;
        }
        
        .add-to-cart {
            background-color: #5B120D;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .add-to-cart:hover {
            background-color: #7a1a1a;
        }

        .loading {
            text-align: center;
            padding: 30px;
            font-size: 18px;
            color: #5B120D;
        }

        .error {
            text-align: center;
            padding: 30px;
            font-size: 18px;
            color: #d32f2f;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">ВIТЕ</div>
            
            <nav class="nav-center">
                <ul>
                    <li><a href="index.html">Меню</a></li>
                    <li><a href="index.html#delivery">Доставка</a></li>
                    <li><a href="index.html#about">О ресторане</a></li>
                </ul>
            </nav>
            
            <div class="social-icons">
                <a href="#" aria-label="ВКонтакте">
                    <img src="https://pngicon.ru/file/uploads/vk.png" alt="VK" width="28" height="28">
                </a>
                <a href="#" aria-label="Телеграм">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="#F4F2E5">
                        <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.14-.26.26-.534.26l.2-3.004 5.59-5.043c.24-.213-.054-.334-.373-.12l-6.91 4.34-2.97-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.53-.21 1.002.13.832.942z"/>
                    </svg>
                </a>
                <a href="#" aria-label="Личный кабинет" id="auth-icon">
                    <svg width="29" height="29" viewBox="0 0 24 24" fill="#F4F2E5">
                        <path d="M12 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                    </svg>
                </a>
            </div>
        </div>
    </header>
    
    <main class="menu-page">
        
        
        <div class="menu-types">
            <button class="menu-type-btn active" data-type="main">ОСНОВНОЕ МЕНЮ</button>
            <button class="menu-type-btn" data-type="bar">БАРНОЕ МЕНЮ</button>
        </div>
        
        <div class="menu-categories">
            <div class="categories-list">
                <button class="category-btn active" data-category="all">Все блюда</button>
                <button class="category-btn" data-category="cold">Холодные блюда</button>
                <button class="category-btn" data-category="hot">Горячие блюда</button>
                <button class="category-btn" data-category="snacks">Закуски</button>
                <button class="category-btn" data-category="desserts">Десерты</button>
            </div>
        </div>
        
        <div class="menu-items" id="menu-items-container">
            <!-- Блюда будут загружаться здесь динамически -->
            <div class="loading">Загрузка меню...</div>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <nav>
                <ul>
                    <li><a href="index.html#menu">Меню</a></li>
                    <li><a href="index.html#delivery">Доставка</a></li>
                    <li><a href="index.html#about">О ресторане</a></li>
                    <li><a href="index.html#contacts">Справочная информация</a></li>
                </ul>
            </nav>
        </div>
    </footer>

    <!-- Модальное окно авторизации -->
    <div id="auth-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            
            <div class="auth-tabs">
                <button class="tab-btn active" data-tab="register">РЕГИСТРАЦИЯ</button>
                <button class="tab-btn" data-tab="login">ВХОД</button>
            </div>
            
            <div id="register-tab" class="auth-tab active">
                <form id="register-form">
                    <div class="form-group">
                        <input type="text" id="reg-name" placeholder="Имя" required>
                    </div>
                    <div class="form-group">
                        <input type="text" id="reg-surname" placeholder="Фамилия" required>
                    </div>
                    <div class="form-group">
                        <input type="text" id="reg-patronymic" placeholder="Отчество">
                    </div>
                    <div class="form-group">
                        <input type="tel" id="reg-phone" placeholder="Телефон" required>
                    </div>
                    <div class="form-group">
                        <input type="email" id="reg-email" placeholder="Email" required>
                    </div>
                    <div class="form-group">
                        <input type="text" id="reg-login" placeholder="Логин" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="reg-password" placeholder="Пароль" required>
                    </div>
                    <button type="submit" class="submit-btn">РЕГИСТРАЦИЯ</button>
                </form>
            </div>
            
            <div id="login-tab" class="auth-tab">
                <form id="login-form">
                    <div class="form-group">
                        <input type="text" id="login-username" placeholder="Логин" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="login-password" placeholder="Пароль" required>
                    </div>
                    <button type="submit" class="submit-btn">ВОЙТИ</button>
                    <div class="auth-footer">
                        <button type="button" id="change-to-register">Изменить данные</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Функция для загрузки меню из API
        async function loadMenu() {
            const container = document.getElementById('menu-items-container');
            
            try {
                // Показываем индикатор загрузки
                container.innerHTML = '<div class="loading">Загрузка меню...</div>';
                
                // Запрашиваем данные из API
                const response = await fetch('http://localhost:8080/api/menu?limit=10&offset=0');
                
                if (!response.ok) {
                    throw new Error('Ошибка загрузки меню');
                }
                
                const data = await response.json();
                
                // Очищаем контейнер
                container.innerHTML = '';
                
                // Если нет блюд
                if (data.length === 0) {
                    container.innerHTML = '<div class="error">Меню временно недоступно</div>';
                    return;
                }
                
                // Создаем карточки для каждого блюда
                data.forEach(dish => {
                    const dishCard = document.createElement('div');
                    dishCard.className = 'dish-card';
                    dishCard.dataset.category = dish.category || 'all';
                    
                    dishCard.innerHTML = `
                        ${dish.image ? `<img src="${dish.image}" alt="${dish.name}" class="dish-image">` : ''}
                        <h3 class="dish-name">${dish.name}</h3>
                        <div class="dish-weight">${dish.weight || '--'} гр</div>
                        <p class="dish-description">${dish.description || 'Описание отсутствует'}</p>
                        <div class="dish-footer">
                            <div class="dish-price">${dish.price ? dish.price + ' ₽' : '--'}</div>
                            <button class="add-to-cart">В корзину</button>
                        </div>
                    `;
                    
                    container.appendChild(dishCard);
                });
                
                // Добавляем обработчики событий для фильтрации
                setupFilterHandlers();
                
            } catch (error) {
                console.error('Ошибка загрузки меню:', error);
                container.innerHTML = `<div class="error">Ошибка загрузки меню: ${error.message}</div>`;
            }
        }
        
        // Функция для настройки обработчиков фильтрации
        function setupFilterHandlers() {
            // Фильтрация по типу меню
            document.querySelectorAll('.menu-type-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.menu-type-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    // Здесь можно добавить логику фильтрации по типу меню
                });
            });
            
            // Фильтрация по категориям
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const category = this.dataset.category;
                    const dishCards = document.querySelectorAll('.dish-card');
                    
                    dishCards.forEach(card => {
                        if (category === 'all' || card.dataset.category === category) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
            
            // Обработчики для кнопок "В корзину"
            document.querySelectorAll('.add-to-cart').forEach(btn => {
                btn.addEventListener('click', function() {
                    const dishCard = this.closest('.dish-card');
                    const dishName = dishCard.querySelector('.dish-name').textContent;
                    const dishPrice = dishCard.querySelector('.dish-price').textContent;
                    
                    alert(`Добавлено в корзину: ${dishName} (${dishPrice})`);
                    // Здесь можно добавить логику добавления в корзину
                });
            });
        }
        
        // Загружаем меню при загрузке страницы
        document.addEventListener('DOMContentLoaded', loadMenu);
    </script>
</body>
</html>